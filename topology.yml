provider: clab

defaults:
  devices:
    iol:
      clab:
        image: asifsyd/cisco_iol:17.12.01
    eos:
      clab:
        image: asifsyd/ceos:4.32.0F
    ioll2:
      clab:
        image: asifsyd/cisco_iol:l2-17.12.01

nodes:
  R1:
  D1:
    config: [templates/D1.j2]
  D2:
    config: [templates/D2.j2]
  S1:
  S2:

vlans:
  vlan_10:
    id: 10
    prefix: 10.10.10.0/24
  vlan_20:
    id: 20
    prefix: 10.20.20.0/24

groups:
  core:
    members: [R1]
    device: iol
    module: [ospf]
    ospf:
      area: 0
  dist:
    members: [D1, D2]
    device: eos
    module: [vlan, ospf]
    ospf:
      area: 0
    vlan:
      mode: irb
  access:
    members: [S1, S2]
    device: ioll2
    module: [vlan]
    vlan:
      mode: bridge

links:
  - R1-D1
  - R1-D2
  - D1:
    S1:
    vlan.trunk: [vlan_10, vlan_20]
  - D2:
    S2:
    vlan.trunk: [vlan_10, vlan_20]
