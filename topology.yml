---
name: campus
provider: clab

defaults.devices:
  iol.clab.image: asifsyd/cisco_iol:17.12.01
  ioll2.clab.image: asifsyd/cisco_iol:l2-17.12.01
  linux.clab.image: alpine:latest

module: [gateway]

vlans:
  vlan_10:
    id: 10
    gateway:
      ipv4: 172.16.0.254/24
  vlan_20:
    id: 20
    gateway:
      ipv4: 172.16.1.254/24

nodes:
  R1:
  D1:
    config: [configs]
  D2:
    config: [configs]
  S1:
  S2:
  H1:
  H2:
  H3:
  H4:

groups:
  CORE:
    members: [R1]
    device: iol
    role: router
    module: [ospf]
  DISTRIBUTION:
    members: [D1, D2]
    device: ioll2
    module: [vlan, ospf]
    vlan:
      mode: irb
  ACCESS:
    members: [S1, S2]
    device: ioll2
    module: [vlan]
    vlan:
      mode: bridge
  hosts:
    members: [H1, H2, H3, H4]
    device: linux
    role: host

links:
  - R1-D1
  - R1-D2

  - group: vlan_10
    vlan.access: vlan_10
    members: [H1-S1, H4-S2]

  - group: vlan_20
    vlan.access: vlan_20
    members: [H2-S2, H3-S1]

  - group: access_trunk
    vlan.trunk: [vlan_10, vlan_20]
    members: [D1-S1, D1-S2, D2-S1, D2-S2]
